@using MRA.AssetsManagement.Web.Client.Pages
@using MRA.AssetsManagement.Web.Shared.Assets
@inject IEmployeesService EmployeesService

<MudTable Class="mt-4" Items="@Elements" GroupBy="@groupDefinition">
    <ColGroup>
        <col style="width: 60px;" />
        <col />
        <col />
        <col />
    </ColGroup>
    <HeaderContent>
        <MudTh>Asset Name</MudTh>
        <MudTh>Serial</MudTh>
        <MudTh>From</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Asset Name">@context.AssetName</MudTd>
        <MudTd DataLabel="Serial">@context.Serial</MudTd>
        <MudTd DataLabel="From">@context.From.ToString("dd MMMM yyyy")</MudTd>
    </RowTemplate>
</MudTable>

@code {
    private List<GetEmployeeAssetSerials> Elements = new List<GetEmployeeAssetSerials>();
    [Parameter] public string UserName { get; set; } = null!;

    protected override async Task OnInitializedAsync()
    {
        Elements = await EmployeesService.GetEmployeeAssetsSerials(UserName);
    }

    private TableGroupDefinition<GetEmployeeAssetSerials> groupDefinition = new()
    {
        GroupName = "Asset Types",
        Indentation = false,
        Expandable = true,
        IsInitiallyExpanded = false,
        Selector = x => x.AssetType
    };
}
