@inherits LayoutComponentBase
@layout MainLayout
@inject IAssetTypesService AssetTypesService
@inject NavigationManager NavigationManager
<MudGrid>
    <MudItem md="3">
        <MudPaper Class="pa-2">
            <MudStack Spacing="4">
                <MudStack Row="true">
                    <MudTextField @bind-Value="@_normalText" Label="Search" Margin="Margin.Dense" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentIcon="@Icons.Material.Filled.Search" />
                    <MudIconButton Icon="@Icons.Material.Filled.Add" Color="Color.Primary" aria-label="github" OnClick="New"></MudIconButton>
                </MudStack>
                <MudDivider />
                <MudNavMenu Bordered="true">
                    @if (assetTypes == null)
                    {
                        <MudSkeleton Animation="Animation.Wave" />
                        <MudSkeleton Animation="Animation.Wave" />
                        <MudSkeleton Animation="Animation.Wave" />
                    }
                    else
                    {
                        @foreach (var assetsType in assetTypes)
                        {
                            <MudNavLink Href="@($"/asset-types/{assetsType.Id}")" Icon="@assetsType.Icon">
                                @assetsType.Name
                            </MudNavLink>
                        }
                    }
                </MudNavMenu>
            </MudStack>
        </MudPaper>
    </MudItem>
    @Body
</MudGrid>

    





@code {
    string _normalText = "";
    List<AssetType> assetTypes = null!;

    protected override async Task OnInitializedAsync()
    {
        assetTypes = await AssetTypesService.GetAssetTypes();
    }

    private void New()
    {
        NavigationManager.NavigateTo("/asset-types/new");
    }


}